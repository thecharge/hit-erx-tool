"use strict";angular.module("commonServices",[]),angular.module("hit-util",[]),angular.module("common",["ngResource","my.resource","default","xml","hl7v2-edi","hl7v2","edi","hit-util"]),angular.module("cf",["common"]),angular.module("doc",["common"]),angular.module("cb",["common"]),angular.module("hit-tool-directives",[]),angular.module("hit-tool-services",["common"]);var httpHeaders,app=angular.module("hit-tool",["ngRoute","ui.bootstrap","ngCookies","LocalStorageModule","ngResource","ngSanitize","ngAnimate","ui.bootstrap","angularBootstrapNavTree","QuickList","hit-util","format","default","hl7v2-edi","xml","hl7v2","edi","cf","cb","ngTreetable","blueimp.fileupload","hit-tool-directives","hit-tool-services","commonServices","smart-table","hit-profile-viewer","hit-validation-result","hit-vocab-search","hit-report-viewer","hit-testcase-viewer","hit-testcase-tree","hit-doc","hit-settings","doc"]);app.config(["$routeProvider","$httpProvider","localStorageServiceProvider",function(a,b,c){c.setPrefix("hit-tool").setStorageType("sessionStorage"),a.when("/",{templateUrl:"views/home.html"}).when("/home",{templateUrl:"views/home.html"}).when("/testing",{templateUrl:"../views/templates.html"}).when("/doc",{templateUrl:"views/doc.html"}).when("/setting",{templateUrl:"views/setting.html"}).when("/about",{templateUrl:"views/about.html"}).when("/contact",{templateUrl:"views/contact.html"}).when("/cf",{templateUrl:"views/cf/cf.html"}).when("/cb",{templateUrl:"views/cb/cb.html"}).when("/error",{templateUrl:"error.html"}).otherwise({redirectTo:"/"}),b.interceptors.push("ErrorInterceptor"),httpHeaders=b.defaults.headers}]),app.factory("ErrorInterceptor",["$q","$rootScope","$location","StorageService","$window",function(a,b,c,d,e){var f=function(a){403===a.status?b.openVersionChangeDlg():401===a.status?b.openInvalidReqDlg():404===a.status};return{responseError:function(b){return f(b),a.reject(b)}}}]),app.run(["$rootScope","$location","$modal","TestingSettings","AppInfo","StorageService","$route","$window","$sce","$templateCache","UserService","User",function(a,b,c,d,e,f,g,h,i,j,k,l){a.appInfo={},a.stackPosition=0,a.scrollbarWidth=null,e.get().then(function(b){a.appInfo=b,httpHeaders.common.csrfToken=b.csrfToken,httpHeaders.common.dTime=b.date},function(b){a.appInfo={},a.openErrorDlg()}),null==f.get(f.USER_KEY)?k.create().then(function(a){l.info=a,f.set(f.USER_KEY,a)},function(a){l.info=null,f.remove(f.USER_KEY)}):l.info=angular.fromJson(f.get(f.USER_KEY)),a.$watch(function(){return b.path()},function(b,c){if(a.activePath===b){var d,e=h.history.state;d=!!(e&&e.position<=a.stackPosition),d?a.stackPosition--:a.stackPosition++}else g.current&&(h.history.replaceState({position:a.stackPosition},""),a.stackPosition++)}),a.isActive=function(b){return b===a.activePath},a.setActive=function(c){""===c||"/"===c?b.path("/home"):a.activePath=c},a.isSubActive=function(b){return b===a.subActivePath},a.setSubActive=function(b){a.subActivePath=b,f.set(f.ACTIVE_SUB_TAB_KEY,b)},a.showError=function(b){var d=c.open({templateUrl:"ErrorDlgDetails.html",controller:"ErrorDetailsCtrl",resolve:{error:function(){return b}}});d.result.then(function(b){a.error=b},function(){})},a.cutString=function(a){return a.length>20&&(a=a.substring(0,20)+"..."),a},a.tabs=new Array,a.selectTestingType=function(b){a.tabs[0]=!1,a.tabs[1]=!1,a.tabs[2]=!1,a.tabs[3]=!1,a.tabs[4]=!1,a.tabs[5]=!1,a.activeTab=b,a.tabs[a.activeTab]=!0,d.setActiveTab(a.activeTab)},a.downloadArtifact=function(a){var b=document.createElement("form");b.action="api/testartifact/download",b.method="POST",b.target="_target";var c=document.createElement("input");c.name="path",c.value=a,b.appendChild(c),b.style.display="none",document.body.appendChild(b),b.submit()},a.toHTML=function(a){return i.trustAsHtml(a)},a.compile=function(a){return $compile(a)},a.$on("$locationChangeSuccess",function(){a.setActive(b.path())}),a.getScrollbarWidth=function(){if(null==a.scrollbarWidth){var b=document.createElement("div");b.style.visibility="hidden",b.style.width="100px",b.style.msOverflowStyle="scrollbar",document.body.appendChild(b);var c=b.offsetWidth;b.style.overflow="scroll";var d=document.createElement("div");d.style.width="100%",b.appendChild(d);var e=d.offsetWidth;b.parentNode.removeChild(b),a.scrollbarWidth=c-e}return a.scrollbarWidth},a.openValidationResultInfo=function(){c.open({templateUrl:"ValidationResultInfoCtrl.html",windowClass:"profile-modal",controller:"ValidationResultInfoCtrl"})},a.showSettings=function(){c.open({templateUrl:"SettingsCtrl.html",size:"lg",keyboard:"false",controller:"SettingsCtrl"})},a.openVersionChangeDlg=function(){a.blankPage();var b=c.open({templateUrl:"VersionChangeCtrl.html",size:"lg",backdrop:!0,keyboard:"false",controller:"VersionChangeCtrl"});b.result.then(function(){a.clearSession(),a.index()},function(){a.clearSession(),a.index()})},a.clearSession=function(){f.clearAll(),j.removeAll()},a.openErrorDlg=function(){b.path("/error")},a.blankPage=function(){},a.index=function(){$("#appcontainer").html(""),h.location.reload()},a.openInvalidReqDlg=function(){a.blankPage();var b=c.open({templateUrl:"InvalidReqCtrl.html",size:"lg",backdrop:!0,keyboard:"false",controller:"InvalidReqCtrl"});b.result.then(function(){a.index()},function(){a.index()})},a.openNotFoundDlg=function(){a.blankPage();var b=c.open({templateUrl:"NotFoundCtrl.html",size:"lg",backdrop:!0,keyboard:"false",controller:"NotFoundCtrl"});b.result.then(function(){a.index()},function(){a.index()})},a.pettyPrintType=function(a){return"TestStep"===a?"Test Step":"TestCase"===a?"Test Case":a}}]),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c,d){}]).directive("carousel",[function(){return{}}]),angular.module("hit-tool-services").factory("TabSettings",["$rootScope",function(a){return{"new":function(a){return{key:a,activeTab:0,getActiveTab:function(){return this.activeTab},setActiveTab:function(a){this.activeTab=a,this.save()},save:function(){sessionStorage.setItem(this.key,this.activeTab)},restore:function(){this.activeTab=null!=sessionStorage.getItem(this.key)&&""!=sessionStorage.getItem(this.key)?parseInt(sessionStorage.getItem(this.key)):0}}}}}]),app.controller("ErrorDetailsCtrl",["$scope","$modalInstance","error",function(a,b,c){a.error=c,a.ok=function(){b.close(a.error)},a.cancel=function(){b.dismiss("cancel")}}]),app.directive("stRatio",function(){return{link:function(a,b,c){var d=+c.stRatio;b.css("width",d+"%")}}}),app.controller("TableFoundCtrl",["$scope","$modalInstance","table",function(a,b,c){a.table=c,a.tmpTableElements=[].concat(null!=c?c.valueSetElements:[]),a.cancel=function(){b.dismiss("cancel")}}]),app.controller("ValidationResultInfoCtrl",["$scope","$modalInstance",function(a,b){a.close=function(){b.dismiss("cancel")}}]),app.filter("capitalize",function(){return function(a){return a?a.charAt(0).toUpperCase()+a.substr(1).toLowerCase():""}}),app.directive("stRatio",function(){return{link:function(a,b,c){var d=+c.stRatio;b.css("width",d+"%")}}}),app.controller("InvalidReqCtrl",["$scope","$modalInstance","StorageService","$window",function(a,b,c,d){a.close=function(){b.close()}}]),app.controller("ErrorCtrl",["$scope","$modalInstance","StorageService","$window",function(a,b,c,d){a.refresh=function(){b.close(d.location.reload())}}]),app.controller("VersionChangeCtrl",["$scope","$modalInstance","StorageService","$window",function(a,b,c,d){a.close=function(){b.close()}}]),app.controller("NotFoundCtrl",["$scope","$modalInstance","StorageService","$window",function(a,b,c,d){a.close=function(){b.close()}}]),angular.module("my.resource",["ngResource"]).factory("Resource",["$resource",function(a){return function(b,c,d){var e={update:{method:"put",isArray:!1},create:{method:"post"}};d=angular.extend(e,d);var f=a(b,c,d);return f.prototype.$save=function(a,b){return this.id?this.$update(a,b):this.$create(a,b)},f}}]),angular.module("hit-tool-services").factory("TestingSettings",["$rootScope",function(a){var b={activeTab:0,getActiveTab:function(){return b.activeTab},setActiveTab:function(a){b.activeTab=a,b.save()},save:function(){sessionStorage.TestingActiveTab=b.activeTab},restore:function(){b.activeTab=null!=sessionStorage.TestingActiveTab&&""!=sessionStorage.TestingActiveTab?parseInt(sessionStorage.TestingActiveTab):0}};return b}]),angular.module("commonServices").factory("StorageService",["$rootScope","localStorageService",function(a,b){var c={CF_EDITOR_CONTENT_KEY:"CF_EDITOR_CONTENT",CF_LOADED_TESTCASE_ID_KEY:"CF_LOADED_TESTCASE_ID",CF_LOADED_TESTCASE_TYPE_KEY:"CF_LOADED_TESTCASE_TYPE",CB_EDITOR_CONTENT_KEY:"CB_EDITOR_CONTENT",CB_SELECTED_TESTCASE_ID_KEY:"CB_SELECTED_TESTCASE_ID",CB_SELECTED_TESTCASE_TYPE_KEY:"CB_SELECTED_TESTCASE_TYPE",CB_LOADED_TESTCASE_ID_KEY:"CB_LOADED_TESTCASE_ID",CB_LOADED_TESTCASE_TYPE_KEY:"CB_LOADED_TESTCASE_TYPE",CB_LOADED_TESTSTEP_TYPE_KEY:"CB_LOADED_TESTSTEP_TYPE_KEY",CB_LOADED_TESTSTEP_ID_KEY:"CB_LOADED_TESTSTEP_ID",TRANSPORT_CONFIG_KEY:"TRANSPORT_CONFIG_KEY",ACTIVE_SUB_TAB_KEY:"ACTIVE_SUB_TAB",CB_TESTCASE_LOADED_RESULT_MAP_KEY:"CB_TESTCASE_LOADED_RESULT_MAP_KEY",SETTINGS_KEY:"SETTINGS_KEY",USER_KEY:"USER_KEY",USER_CONFIG_KEY:"USER_CONFIG_KEY",remove:function(a){return b.remove(a)},removeList:function(a,c,d){return b.remove(a,c,d)},clearAll:function(){return b.clearAll()},set:function(a,c){return b.set(a,c)},get:function(a){return b.get(a)}};return c}]),angular.module("cf").factory("CF",["Message","Tree",function(a,b){var c={editor:null,cursor:null,tree:new b,testCase:null,selectedTestCase:null,message:new a,searchTableId:0};return c}]),angular.module("cf").factory("CFTestCaseListLoader",["$q","$http",function(a,b){return function(){var c=a.defer();return b.get("api/cf/testcases",{timeout:6e4}).then(function(a){c.resolve(angular.fromJson(a.data))},function(a){c.reject(a.data)}),c.promise}}]),angular.module("cb").factory("CB",["Message","ValidationSettings","Tree","StorageService","Transport","Logger","User",function(a,b,c,d,e,f,g){var h=function(){var a=new e;return null!=d.get(d.USER_CONFIG_KEY)&&(a.config=angular.fromJson(d.get(d.USER_CONFIG_KEY))),a},i={testCase:null,selectedTestCase:null,editor:null,tree:new c,transport:h(),cursor:null,message:new a,logger:new f,validationSettings:new b,setContent:function(a){i.message.content=a,i.editor.instance.doc.setValue(a),i.message.notifyChange()},getContent:function(){return i.message.content}};return i}]),angular.module("cb").factory("CBTestCaseListLoader",["$q","$http",function(a,b){return function(){var c=a.defer();return b.get("api/cb/testcases").then(function(a){c.resolve(angular.fromJson(a.data))},function(a){c.reject(a.data)}),c.promise}}]),angular.module("hit-tool").controller("ValidationResultDetailsCtrl",["$scope","$modalInstance","selectedElement",function(a,b,c){a.selectedElement=c,a.ok=function(){b.close(a.selectedElement)},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("cf").controller("CFTestingCtrl",["$scope","$http","CF","$window","$modal","$filter","$rootScope","CFTestCaseListLoader","$timeout","StorageService","TestCaseService",function(a,b,c,d,e,f,g,h,i,j,k){a.cf=c,a.loading=!1,a.loadingTC=!1,a.error=null,a.testCases=[],a.testCase=null,a.tree={},a.tabs=new Array,a.error=null;var l=new k;a.setActiveTab=function(b){a.tabs[0]=!1,a.tabs[1]=!1,a.tabs[2]=!1,a.tabs[3]=!1,a.activeTab=b,a.tabs[a.activeTab]=!0},a.getTestCaseDisplayName=function(a){return a.parentName+" - "+a.label},a.selectTestCase=function(b){a.loadingTC=!0,i(function(){if(b.testContext&&null!=b.testContext){c.testCase=b,a.testCase=c.testCase;var d=j.get(j.CF_LOADED_TESTCASE_ID_KEY);d!=b.id&&(j.set(j.CF_LOADED_TESTCASE_ID_KEY,b.id),j.remove(j.CF_EDITOR_CONTENT_KEY)),a.$broadcast("cf:testCaseLoaded",a.testCase),a.$broadcast("cf:profileLoaded",a.testCase.testContext.profile),a.$broadcast("cf:valueSetLibraryLoaded",a.testCase.testContext.vocabularyLibrary)}a.loadingTC=!1})},a.init=function(){j.remove(j.ACTIVE_SUB_TAB_KEY),a.error=null,a.testCases=[],a.loading=!0;var b=new h;b.then(function(b){if(angular.forEach(b,function(a){l.buildCFTestCases(a)}),a.testCases=f("orderBy")(b,"position"),"function"==typeof a.tree.build_all){a.tree.build_all(a.testCases);var c=null,d=j.get(j.CF_LOADED_TESTCASE_ID_KEY);if(null!=d)for(var e=0;e<a.testCases.length;e++){var g=l.findOneById(d,a.testCases[e]);if(null!=g){c=g;break}}null!=c&&a.selectNode(c.id,c.type),a.error=null}else a.error="Something went wrong, Please refresh your page.";a.loading=!1},function(b){a.error="Something went wrong, Please refresh your page.",a.loading=!1})},a.selectNode=function(b,c){i(function(){l.selectNodeByIdAndType(a.tree,b,c)},0)},a.openProfileInfo=function(){e.open({templateUrl:"CFProfileInfoCtrl.html",windowClass:"profile-modal",controller:"CFProfileInfoCtrl"})},a.isSelectable=function(a){return a.testContext&&null!=a.testContext}}]),angular.module("cf").controller("CFProfileInfoCtrl",["$scope","$modalInstance",function(a,b){a.close=function(){b.dismiss("cancel")}}]),angular.module("cf").controller("CFValidatorCtrl",["$scope","$http","CF","$window","$timeout","$modal","NewValidationResult","$rootScope","ServiceDelegator","StorageService",function(a,b,c,d,e,f,g,h,i,j){a.validator=null,a.parser=null,a.editorService=null,a.treeService=null,a.cursorService=null,a.cf=c,a.testCase=c.testCase,a.message=c.message,a.selectedMessage={},a.loading=!0,a.error=null,a.vError=null,a.vLoading=!0,a.mError=null,a.mLoading=!0,a.delimeters=[],a.counter=0,a.type="cf",a.loadRate=4e3,a.tokenPromise=null,a.editorInit=!1,a.nodelay=!1,a.resized=!1,a.selectedItem=null,a.activeTab=0,a.tError=null,a.tLoading=!1,a.dqaCodes=null!=j.get(j.DQA_OPTIONS_KEY)?angular.fromJson(j.get(j.DQA_OPTIONS_KEY)):[],a.showDQAOptions=function(){var b=f.open({templateUrl:"DQAConfig.html",controller:"DQAConfigCtrl",windowClass:"dq-modal",animation:!0,keyboard:!1,backdrop:!1});b.result.then(function(b){a.dqaCodes=b},function(){})},a.hasContent=function(){return""!=a.cf.message.content&&null!=a.cf.message.content},a.refreshEditor=function(){e(function(){a.editor&&a.editor.refresh()},1e3)},a.options={paramName:"file",formAcceptCharset:"utf-8",autoUpload:!0,type:"POST"},a.$on("fileuploadadd",function(b,c){(c.autoUpload||c.autoUpload!==!1&&$(this).fileupload("option","autoUpload"))&&c.process().done(function(){var b=c.files[0].name;c.url="api/message/upload";c.submit().success(function(c,d,e){a.nodelay=!0;var f=angular.fromJson(c);a.cf.message.name=b,a.cf.editor.instance.doc.setValue(f.content),a.mError=null,a.execute()}).error(function(c,d,e){a.cf.message.name=b,a.mError="Something went wrong, Cannot upload file: "+b+", Error: "+e}).complete(function(a,b,c){})})}),a.loadMessage=function(){a.cf.testCase.testContext.message&&null!=a.cf.testCase.testContext.message&&(a.nodelay=!0,a.selectedMessage=a.cf.testCase.testContext.message,null!=a.selectedMessage&&null!=a.selectedMessage.content?a.editor.doc.setValue(a.selectedMessage.content):(a.editor.doc.setValue(""),a.cf.message.id=null,a.cf.message.name=""),a.execute())},a.setLoadRate=function(b){a.loadRate=b},a.initCodemirror=function(){a.editor=CodeMirror.fromTextArea(document.getElementById("cfTextArea"),{lineNumbers:!0,fixedGutter:!0,theme:"elegant",readOnly:!1,showCursorWhenSelecting:!0,gutters:["CodeMirror-linenumbers","cm-edi-segment-name"]}),a.editor.setSize("100%",345),a.editor.on("keyup",function(){e(function(){var b=a.editor.doc.getValue();a.error=null,a.tokenPromise&&(e.cancel(a.tokenPromise),a.tokenPromise=void 0),c.message.name=null,""!==b.trim()?a.tokenPromise=e(function(){a.execute()},a.loadRate):a.execute()})}),a.editor.on("dblclick",function(b){e(function(){var b=a.cursorService.getCoordinate(a.editor,a.cf.tree);b.lineNumber=b.line,b.startIndex=b.startIndex+1,b.endIndex=b.endIndex+1,a.cf.cursor.init(b,!0),a.treeService.selectNodeByIndex(a.cf.tree.root,c.cursor,c.message.content)})})},a.validateMessage=function(){try{if(a.vLoading=!0,a.vError=null,null!=a.cf.testCase&&""!==a.cf.message.content){var b=a.cf.testCase.testContext.id,c=a.cf.message.content;a.cf.testCase.label;null==a.validator&&(a.validator=i.getMessageValidator(a.testCase.testContext.format));var d=a.validator.validate(b,c,null,"Free");d.then(function(b){a.vLoading=!1,a.loadValidationResult(b)},function(b){a.vLoading=!1,a.vError=b,a.loadValidationResult(null)})}else a.loadValidationResult(null),a.vLoading=!1,a.vError=null}catch(e){a.vLoading=!1,a.vError=e,a.loadValidationResult(null)}},a.loadValidationResult=function(b){e(function(){a.$broadcast("cf:validationResultLoaded",b)})},a.select=function(b){if(void 0!=b&&null!=b.path&&-1!=b.line){var c=a.treeService.selectNodeByPath(a.cf.tree.root,b.line,b.path),d=null!=c?c.data:null;a.cf.cursor.init(null!=d?d.lineNumber:b.line,null!=d?d.startIndex-1:b.column-1,null!=d?d.endIndex-1:b.column-1,null!=d?d.startIndex-1:b.column-1,!1),a.editorService.select(a.editor,a.cf.cursor)}},a.clearMessage=function(){a.nodelay=!0,a.mError=null,a.editor&&(a.editor.doc.setValue(""),a.execute())},a.saveMessage=function(){a.cf.message.download()},a.parseMessage=function(){try{if(null!=a.cf.testCase&&null!=a.cf.testCase.testContext&&""!=a.cf.message.content){a.tLoading=!0,null==a.parser&&(a.parser=i.getMessageParser(a.testCase.testContext.format));var b=a.parser.parse(a.cf.testCase.testContext.id,a.cf.message.content);b.then(function(b){a.tLoading=!1,a.cf.tree.root.build_all(b.elements),i.updateEditorMode(a.editor,b.delimeters,a.cf.testCase.testContext.format),a.editorService.setEditor(a.editor),a.treeService.setEditor(a.editor)},function(b){a.tLoading=!1,a.tError=b})}else"function"==typeof a.cf.tree.root.build_all&&a.cf.tree.root.build_all([]),a.tError=null,a.tLoading=!1}catch(c){a.tLoading=!1,a.tError=c}},a.onNodeSelect=function(b){a.treeService.getEndIndex(b,a.cf.message.content),a.cf.cursor.init(b.data,!1),a.editorService.select(a.editor,a.cf.cursor)},a.execute=function(){a.tokenPromise&&(e.cancel(a.tokenPromise),a.tokenPromise=void 0),null!=a.cf.testCase&&(a.error=null,a.tError=null,a.mError=null,a.vError=null,a.cf.message.content=a.editor.doc.getValue(),j.set(j.CF_EDITOR_CONTENT_KEY,a.cf.message.content),a.refreshEditor(),a.validateMessage(),a.parseMessage())},a.removeDuplicates=function(){a.vLoading=!0,a.$broadcast("cf:removeDuplicates")},a.init=function(){a.vLoading=!1,a.tLoading=!1,a.mLoading=!1,a.error=null,a.tError=null,a.mError=null,a.vError=null,a.initCodemirror(),a.refreshEditor(),a.$on("cf:testCaseLoaded",function(b,c){if(a.testCase=c,null!=a.testCase){var d=null==j.get(j.CF_EDITOR_CONTENT_KEY)?"":j.get(j.CF_EDITOR_CONTENT_KEY);a.nodelay=!0,a.mError=null,a.cf.editor=i.getEditor(a.testCase.testContext.format),a.cf.editor.instance=a.editor,a.cf.cursor=i.getCursor(a.testCase.testContext.format),a.validator=i.getMessageValidator(a.testCase.testContext.format),a.parser=i.getMessageParser(a.testCase.testContext.format),a.editorService=i.getEditorService(a.testCase.testContext.format),a.treeService=i.getTreeService(a.testCase.testContext.format),a.cursorService=i.getCursorService(a.testCase.testContext.format),a.editor&&(a.editor.doc.setValue(d),a.execute())}}),h.$on("cf:duplicatesRemoved",function(b,c){a.vLoading=!1})}}]),angular.module("cf").controller("CFReportCtrl",["$scope","$sce","$http","CF",function(a,b,c,d){a.cf=d}]),angular.module("cf").controller("CFVocabularyCtrl",["$scope","CF",function(a,b){a.cf=b}]),angular.module("cf").controller("CFProfileViewerCtrl",["$scope","CF","$rootScope",function(a,b,c){a.cf=b}]),angular.module("cb").controller("CBTestingCtrl",["$scope","$window","$rootScope","CB","StorageService","$timeout",function(a,b,c,d,e,f){a.testCaseLoaded=null,a.init=function(){var b=e.get(e.ACTIVE_SUB_TAB_KEY);(null==b||"/cb_execution"!=b)&&(b="/cb_testcase"),c.setSubActive(b),a.$on("cb:testCaseLoaded",function(b,c,d){a.testCaseLoaded=c})},a.setSubActive=function(b){c.setSubActive(b),"/cb_execution"===b&&a.$broadcast("cb:refreshEditor")}}]),angular.module("cb").controller("CBExecutionCtrl",["$scope","$window","$rootScope","CB","$modal","TestExecutionClock","Endpoint","TestExecutionService","$timeout","StorageService","User",function(a,b,c,d,e,f,g,h,i,j,k){a.loading=!1,a.error=null,a.tabs=new Array,a.testCase=null,a.testStep=null,a.logger=d.logger,a.connecting=!1,a.transport=d.transport,a.endpoint=null,a.hidePwd=!0,a.sent=null,a.received=null,a.configCollapsed=!0,a.counterMax=30,a.counter=0,a.listenerReady=!1,a.testStepListCollapsed=!1,a.warning=null,a.sutInititiatorForm="",a.taInititiatorForm="",a.user=k;var l=["Incorrect message Received. Please check the log for more details","No Outbound message found","Invalid message Received. Please see console for more details.","Invalid message Sent. Please see console for more details."],m=function(a){return a},n=function(a){return a};a.setActiveTab=function(b){a.tabs[0]=!1,a.tabs[1]=!1,a.tabs[2]=!1,a.tabs[3]=!1,a.activeTab=b,a.tabs[a.activeTab]=!0},a.getTestType=function(){return d.testCase.type},a.disabled=function(){return null==d.testCase||null===d.testCase.id},a.getTestType=function(){return null!=a.testCase?a.testCase.type:""},a.loadValidationPanel=function(b){var c=b.testContext;c&&null!=c&&(a.setActiveTab(0),i(function(){a.$broadcast("cb:testStepLoaded",b),a.$broadcast("cb:profileLoaded",c.profile),a.$broadcast("cb:valueSetLibraryLoaded",c.vocabularyLibrary)}))},a.resetTestCase=function(){j.remove(j.CB_LOADED_TESTSTEP_TYPE_KEY),j.remove(j.CB_LOADED_TESTSTEP_ID_KEY),a.executeTestCase(a.testCase)},a.selectTestStep=function(b){i(function(){d.testStep=b,a.testStep=b,j.set(j.CB_LOADED_TESTSTEP_TYPE_KEY,a.testStep.type),j.set(j.CB_LOADED_TESTSTEP_ID_KEY,a.testStep.id),null==b||a.isManualStep(b)||(void 0===b.executionMessage&&"TA_INITIATOR"===b.testingType&&h.setExecutionMessage(b,b.testContext.message.content),a.loadValidationPanel(b)),a.isTestCaseCompleted()&&a.viewConsole(b.id)})},a.clearTestStep=function(){d.testStep=null,a.testStep=null,a.$broadcast("cb:removeTestStep")},a.getExecutionStatus=function(a){return h.getExecutionStatus(a)},a.getValidationStatus=function(a){return h.getValidationStatus(a)},a.isManualStep=function(a){return"TA_MANUAL"===a.testingType||"SUT_MANUAL"===a.testingType},a.isSutInitiator=function(a){return"SUT_INITIATOR"==a.testingType},a.isTaInitiator=function(a){return"TA_INITIATOR"==a.testingType},a.isStepCompleted=function(b){return"COMPLETE"==a.getExecutionStatus(b)},a.completeStep=function(a){h.setExecutionStatus(a,"COMPLETE")},a.completeManualStep=function(b){a.completeStep(b)},a.progressStep=function(a){h.setExecutionStatus(a,"IN_PROGRESS")},a.goNext=function(b){a.isManualStep(b)&&a.completeStep(b),a.isLastStep(b)?a.completeTestCase():a.executeTestStep(a.findNextStep(b.position))},a.goBack=function(b){if(a.isManualStep(b)&&a.completeStep(b),!a.isFirstStep(b)){var c=a.findPreviousStep(b.position);a.warning=null;var d=a.transport.logs[c.id];a.logger.content=d&&null!=d?d:"",a.isManualStep(c)||(a.isSutInitiator(c)||a.isTaInitiator(c))&&(a.transport.loadConfigForm(c.protocol,c.testingType).then(function(b){"TA_INITIATOR"===c.testingType?a.taInititiatorForm=b:"SUT_INITIATOR"===c.testingType&&(a.sutInititiatorForm=b)}),a.isSutInitiator(c)&&a.transport.configListener(c.protocol)),a.selectTestStep(c)}},a.executeTestStep=function(b){a.warning=null;var c=a.transport.logs[b.id];a.logger.content=c&&null!=c?c:"",null!=b&&(a.isManualStep(b)||(a.isSutInitiator(b)||a.isTaInitiator(b))&&(a.transport.loadConfigForm(b.protocol,b.testingType).then(function(c){"TA_INITIATOR"===b.testingType?a.taInititiatorForm=c:"SUT_INITIATOR"===b.testingType&&(a.sutInititiatorForm=c)}),a.isSutInitiator(b)&&a.transport.configListener(b.protocol)),a.selectTestStep(b))},a.openConfig=function(){if("SUT_INITIATOR"===a.testStep.testingType)var b=e.open({templateUrl:"SutInitiatorConfigForm.html",windClass:"initiator-config-modal",keyboard:"false",controller:"InitiatorConfigCtrl",resolve:{htmlForm:function(){return a.sutInititiatorForm},config:function(){return d.transport.config.sutInitiator},domain:function(){return d.transport.domain},protocol:function(){return d.transport.protocol}}});else if("TA_INITIATOR"===a.testStep.testingType){var b=e.open({templateUrl:"TaInitiatorConfigForm.html",size:"initiator-config-modal",keyboard:"false",controller:"InitiatorConfigCtrl",resolve:{htmlForm:function(){return a.taInititiatorForm},config:function(){return d.transport.config.taInitiator},domain:function(){return d.transport.domain},protocol:function(){return d.transport.protocol}}});b.result.then(function(a){d.transport.config.taInitiator=a;var b=angular.fromJson(j.get(j.USER_CONFIG_KEY));b.taInitiator=a,j.set(j.USER_CONFIG_KEY,angular.toJson(b))},function(){})}},a.completeTestCase=function(){a.testCase.executionStatus="COMPLETE",null!=d.editor.instance&&d.editor.instance.setOption("readOnly",!0),a.clearTestStep()},a.isTestCaseCompleted=function(){return a.testCase&&"COMPLETE"===a.testCase.executionStatus},a.isTestStepCompleted=function(b){return null!=b&&(!a.isManualStep(b)&&"COMPLETE"==a.getExecutionStatus(b)||a.isManualStep(b))},a.shouldNextStep=function(b){return null!=a.testStep&&a.testStep===b&&!a.isTestCaseCompleted()&&!a.isLastStep(b)&&a.isTestStepCompleted(b)},a.isLastStep=function(b){return null!=b&&null!=a.testCase&&a.testCase.children.length===b.position},a.isFirstStep=function(b){return null!=b&&null!=a.testCase&&1===b.position},a.isTestCaseSuccessful=function(){if(null!=a.testCase)for(var b=0;b<a.testCase.children.length;b++)if(a.getValidationStatus(a.testCase.children[b])>0)return!1;return!0},a.testStepSucceed=function(b){return a.getValidationStatus(b)<=0},a.findNextStep=function(b){for(var c=0;c<a.testCase.children.length;c++)if(a.testCase.children[c].position===b+1)return a.testCase.children[c];return null},a.findPreviousStep=function(b){for(var c=0;c<a.testCase.children.length;c++)if(a.testCase.children[c].position===b-1)return a.testCase.children[c];return null},a.clearExecution=function(){if(null!=a.testCase){for(var b=0;b<a.testCase.children.length;b++){var c=a.testCase.children[b];h.deleteExecutionStatus(c),h.deleteValidationReport(c),h.deleteExecutionMessage(c),h.deleteMessageTree(c)}a.testCase.executionStatus&&delete a.testCase.executionStatus}},a.setNextStepMessage=function(b){var c=a.findNextStep(a.testStep.position);null==c||a.isManualStep(c)||(a.completeStep(c),h.setExecutionMessage(c,b))},a.log=function(b){a.logger.log(b)},a.isValidConfig=function(){return null!=a.transport.config&&""!=a.transport.config},a.outboundMessage=function(){return null!=a.testStep?a.testStep.testContext.message.content:null},a.hasUserContent=function(){return d.editor&&null!=d.editor&&null!=d.editor.instance.doc.getValue()&&""!=d.editor.instance.doc.getValue()},a.hasRequestContent=function(){return null!=a.outboundMessage()&&""!=a.outboundMessage()},a.send=function(){a.connecting=!0,a.progressStep(a.testStep),a.error=null,a.hasUserContent()?(a.logger.clear(),a.received="",a.logger.logOutbound(0),a.transport.send(a.testStep.id,d.editor.instance.doc.getValue()).then(function(b){var c=b.incoming,d=b.outgoing;a.logger.logOutbound(1),a.logger.log(d),a.logger.logOutbound(2),a.logger.log(c);try{a.completeStep(a.testStep);var e=n(c);a.logger.logOutbound(3),a.setNextStepMessage(e)}catch(f){a.error=l[0],a.logger.logOutbound(4),a.logger.logOutbound(3)}a.connecting=!1,a.transport.logs[a.testStep.id]=a.logger.content},function(b){a.connecting=!1,a.error=b.data,a.logger.log("Error: "+b.data),a.received="",a.completeStep(a.testStep),a.logger.logOutbound(5),a.transport.logs[a.testStep.id]=a.logger.content})):(a.error=l[1],a.connecting=!1,a.transport.logs[a.testStep.id]=a.logger.content)},a.viewConsole=function(b){a.logger.content=a.transport.logs[b]},a.stopListener=function(){a.connecting=!1,a.counter=a.counterMax,f.stop(),a.logger.logInbound(14),a.transport.stopListener(a.testStep.id).then(function(b){a.logger.logInbound(13),a.transport.logs[a.testStep.id]=a.logger.content},function(a){})},a.startListener=function(){var b=a.findNextStep(a.testStep.position);if(null!=b){var c=b.testContext.message.id;a.configCollapsed=!1,a.logger.clear(),a.counter=0,a.connecting=!0,a.error=null,a.warning=null;var e="",g="";a.logger.logInbound(0),a.transport.startListener(a.testStep.id).then(function(b){if(b){a.logger.logInbound(1);var i=function(){++a.counter,a.logger.log(a.logger.getInbound(2)+a.counter+"s"),a.transport.fetchTaInitiatorTransaction(a.testStep.id,d.transport.config.sutInitiator,c).then(function(b){var c=b.incoming,d=b.outgoing;if(a.counter<a.counterMax){if(null!=c&&""!=c&&""==e){a.logger.logInbound(3),a.log(c),e=c;var f=m(c);h.setExecutionMessage(a.testStep,f),a.$broadcast("cb:loadEditorContent",f)}if(null!=d&&""!=d&&""==g){a.logger.logInbound(12),a.log(d),g=d;var i=n(d);a.setNextStepMessage(i)}""!=c&&""!=d&&null!=c&&null!=d&&a.stopListener()}else null==c||""==c?(a.warning=a.logger.logOutbound(7),a.logger.logInbound(8)):(null==d||""==d)&&a.logger.logInbound(9),a.stopListener()},function(b){a.error=b,a.log("Error: "+b),a.received="",a.sent="",a.stopListener()})};f.start(i)}else{var j="Failed to start the communication";a.logger.log(a.logger.getInbound(10)+"Error: "+j),a.logger.logInbound(11),a.connecting=!1,a.error=j}},function(b){a.logger.log(a.logger.getInbound(10)+"Error: "+b),a.logger.logInbound(11),a.connecting=!1,a.error=b})}},a.downloadJurorDoc=function(a,b){var c=$("#"+a).html();if(c&&""!=c){var d=document.createElement("form");d.action="api/testartifact/generateJurorDoc/pdf",d.method="POST",d.target="_target";var e=document.createElement("textarea");e.name="html",e.value=c,d.appendChild(e);var f=document.createElement("input");f.name="type",f.value="JurorDocument",d.style.display="none",d.appendChild(f);var g=document.createElement("input");g.name="type",g.value=b,d.style.display="none",d.appendChild(g),document.body.appendChild(d),d.submit()}},a.downloadTestArtifact=function(b){if(null!=a.testCase){var c=document.createElement("form");c.action="api/testartifact/download",c.method="POST",c.target="_target";var d=document.createElement("input");d.name="path",d.value=b,c.appendChild(d),c.style.display="none",document.body.appendChild(c),c.submit()}},a.init=function(){a.$on("cb:testCaseLoaded",function(b,c,d){a.executeTestCase(c,d)})},a.executeTestCase=function(b,e){null!=b&&(a.loading=!0,d.testStep=null,a.testStep=null,a.setActiveTab(0),e=e&&null!=e?e:"/cb_execution",c.setSubActive(e),"/cb_execution"===e&&a.$broadcast("cb:refreshEditor"),a.logger.clear(),a.error=null,a.warning=null,a.connecting=!1,d.testCase=b,d.transport.setDomain(b.domain),d.transport.logs={},a.testCase=b,f.stop(),a.testCase=b,a.clearExecution(),"TestCase"===b.type?a.executeTestStep(a.testCase.children[0]):"TestStep"===b.type&&(a.setActiveTab(0),d.testStep=b,a.testStep=b,j.set(j.CB_LOADED_TESTSTEP_ID_KEY,a.testStep.id),("DATAINSTANCE"===b.testingType||"TA_RESPONDER"===b.testingType||"TA_INITIATOR"===b.testingType||"SUT_RESPONDER"===b.testingType||"SUT_INITIATOR"===b.testingType)&&a.loadValidationPanel(a.testStep)),a.loading=!1)}}]),angular.module("cb").controller("CBTestCaseCtrl",["$scope","$window","$filter","$rootScope","CB","$timeout","CBTestCaseListLoader","$sce","StorageService","TestCaseService",function(a,b,c,d,e,f,g,h,i,j){a.selectedTestCase=e.selectedTestCase,a.testCase=e.testCase,a.testCases=[],a.tree={},a.loading=!0,a.loadingTC=!1,a.error=null;var k=new j;a.init=function(){a.error=null,a.loading=!0;var b=new g;b.then(function(b){if(a.error=null,angular.forEach(b,function(a){k.buildTree(a)}),a.testCases=b,"function"==typeof a.tree.build_all){a.tree.build_all(a.testCases);var c=null,d=i.get(i.CB_SELECTED_TESTCASE_ID_KEY),e=i.get(i.CB_SELECTED_TESTCASE_TYPE_KEY);if(null!=d&&null!=e){for(var f=0;f<a.testCases.length;f++){var g=k.findOneByIdAndType(d,e,a.testCases[f]);if(null!=g){c=g;break}}null!=c&&a.selectNode(d,e)}if(c=null,d=i.get(i.CB_LOADED_TESTCASE_ID_KEY),e=i.get(i.CB_LOADED_TESTCASE_TYPE_KEY),null!=d&&null!=e){for(var f=0;f<a.testCases.length;f++){
var g=k.findOneByIdAndType(d,e,a.testCases[f]);if(null!=g){c=g;break}}if(null!=c){var h=i.get(i.ACTIVE_SUB_TAB_KEY);a.loadTestCase(c,h,!1)}}}else a.error="Ooops, Something went wrong. Please refresh your page. We are sorry for the inconvenience.";a.loading=!1},function(b){a.loading=!1,a.error="Sorry, Cannot load the test cases. Please try again"})},a.isSelectable=function(a){return!0},a.selectTestCase=function(b){a.loadingTC=!0,a.selectedTestCase=b,i.set(i.CB_SELECTED_TESTCASE_ID_KEY,b.id),i.set(i.CB_SELECTED_TESTCASE_TYPE_KEY,b.type),f(function(){a.$broadcast("cb:testCaseSelected",a.selectedTestCase),a.loadingTC=!1})},a.selectNode=function(b,c){f(function(){k.selectNodeByIdAndType(a.tree,b,c)},0)},a.loadTestCase=function(a,b,c){i.get(i.CB_LOADED_TESTCASE_ID_KEY),i.get(i.CB_LOADED_TESTCASE_TYPE_KEY);i.set(i.CB_LOADED_TESTCASE_ID_KEY,a.id),i.set(i.CB_LOADED_TESTCASE_TYPE_KEY,a.type),(void 0===c||c===!0)&&i.remove(i.CB_EDITOR_CONTENT_KEY),d.$broadcast("cb:testCaseLoaded",a,b)}}]),angular.module("cb").controller("CBValidatorCtrl",["$scope","$http","CB","$window","$timeout","$modal","NewValidationResult","$rootScope","ServiceDelegator","StorageService","TestExecutionService",function(a,b,c,d,e,f,g,h,i,j,k){a.cb=c,a.testStep=null,a.message=c.message,a.loading=!0,a.error=null,a.vError=null,a.vLoading=!0,a.mError=null,a.mLoading=!0,a.counter=0,a.type="cb",a.loadRate=4e3,a.tokenPromise=null,a.editorInit=!1,a.nodelay=!1,a.resized=!1,a.selectedItem=null,a.activeTab=0,a.tError=null,a.tLoading=!1,a.isTestCase=function(){return null!=c.testCase&&"TestCase"===c.testCase.type},a.refreshEditor=function(){e(function(){a.editor&&a.editor.refresh()},1e3)},a.loadExampleMessage=function(){if(null!=a.testStep){var b=a.testStep.testContext;if(b){var c=b.message&&null!=b.message?b.message.content:"";a.isTestCase()&&k.setExecutionMessage(a.testStep,c),a.nodelay=!0,a.cb.editor.instance.doc.setValue(c),a.execute()}}},a.options={paramName:"file",formAcceptCharset:"utf-8",autoUpload:!0,type:"POST"},a.$on("fileuploadadd",function(b,c){(c.autoUpload||c.autoUpload!==!1&&$(this).fileupload("option","autoUpload"))&&c.process().done(function(){var b=c.files[0].name;c.url="api/message/upload";c.submit().success(function(c,d,e){a.nodelay=!0;var f=angular.fromJson(c);a.cb.message.name=b,a.cb.editor.instance.doc.setValue(f.content),a.mError=null,a.execute()}).error(function(c,d,e){a.cb.message.name=b,a.mError="Sorry, Cannot upload file: "+b+", Error: "+e}).complete(function(a,b,c){})})}),a.setLoadRate=function(b){a.loadRate=b},a.initCodemirror=function(){a.editor=CodeMirror.fromTextArea(document.getElementById("cb-textarea"),{lineNumbers:!0,fixedGutter:!0,theme:"elegant",readOnly:!1,showCursorWhenSelecting:!0}),a.editor.setSize("100%",345),a.editor.on("keyup",function(){e(function(){var b=a.editor.doc.getValue();a.error=null,a.tokenPromise&&(e.cancel(a.tokenPromise),a.tokenPromise=void 0),""!==b.trim()?a.tokenPromise=e(function(){a.execute()},a.loadRate):a.execute()})}),a.editor.on("dblclick",function(b){e(function(){var b=i.getCursorService(a.testStep.testContext.format).getCoordinate(a.editor,a.cb.tree);b&&null!=b&&(b.lineNumber=b.line,b.startIndex=b.startIndex+1,b.endIndex=b.endIndex+1,a.cb.cursor.init(b,!0),i.getTreeService(a.testStep.testContext.format).selectNodeByIndex(a.cb.tree.root,c.cursor,c.message.content))})})},a.validateMessage=function(){try{if(null!=a.testStep)if(""!==a.cb.message.content&&null!=a.testStep.testContext){a.vLoading=!0,a.vError=null;var b=i.getMessageValidator(a.testStep.testContext.format).validate(a.testStep.testContext.id,a.cb.message.content,a.testStep.nav,"Based",[],"1223");b.then(function(b){a.vLoading=!1,a.setValidationReport(b)},function(b){a.vLoading=!1,a.vError=b,a.setValidationReport(null)})}else a.setValidationReport(null),a.vLoading=!1,a.vError=null}catch(c){a.vLoading=!1,a.vError=null,a.setValidationReport(null)}},a.setValidationReport=function(b){null!=a.testStep&&(null!=b&&k.setExecutionStatus(a.testStep,"COMPLETE"),h.$broadcast("cb:validationResultLoaded",b))},a.setMessageTree=function(b){a.buildMessageTree(b);var c=b&&null!=b&&b.elements?b:void 0;k.setMessageTree(a.testStep,c)},a.buildMessageTree=function(b){if(null!=a.testStep){var c=b&&null!=b&&b.elements?b.elements:[];"function"==typeof a.cb.tree.root.build_all&&a.cb.tree.root.build_all(c);var d=b&&null!=b&&b.delimeters?b.delimeters:[];i.updateEditorMode(a.editor,d,a.testStep.testContext.format),i.getEditorService(a.testStep.testContext.format).setEditor(a.editor),i.getTreeService(a.testStep.testContext.format).setEditor(a.editor)}},a.clearMessage=function(){a.nodelay=!0,a.mError=null,null!=a.testStep&&(k.deleteValidationReport(a.testStep),k.deleteMessageTree(a.testStep)),a.editor&&(a.editor.doc.setValue(""),a.execute())},a.saveMessage=function(){a.cb.message.download()},a.parseMessage=function(){try{if(null!=a.testStep)if(""!=a.cb.message.content&&null!=a.testStep.testContext){a.tLoading=!0;var b=i.getMessageParser(a.testStep.testContext.format).parse(a.testStep.testContext.id,a.cb.message.content);b.then(function(b){a.tLoading=!1,a.setMessageTree(b)},function(b){a.tLoading=!1,a.tError=b,a.setMessageTree([])})}else a.setMessageTree([]),a.tError=null,a.tLoading=!1}catch(c){a.tLoading=!1,a.tError=c}},a.onNodeSelect=function(b){i.getTreeService(a.testStep.testContext.format).getEndIndex(b,a.cb.message.content),a.cb.cursor.init(b.data,!1),i.getEditorService(a.testStep.testContext.format).select(a.editor,a.cb.cursor)},a.execute=function(){a.tokenPromise&&(e.cancel(a.tokenPromise),a.tokenPromise=void 0),a.error=null,a.tError=null,a.mError=null,a.vError=null,a.cb.message.content=a.editor.doc.getValue(),j.set(j.CB_EDITOR_CONTENT_KEY,a.cb.message.content),a.refreshEditor(),a.isTestCase()&&a.isTestCaseCompleted()?(a.setValidationReport(k.getValidationReport(a.testStep)),a.setMessageTree(k.getMessageTree(a.testStep))):(k.setExecutionMessage(a.testStep,a.cb.message.content),k.deleteValidationReport(a.testStep),k.deleteMessageTree(a.testStep),a.validateMessage(),a.parseMessage())},a.clear=function(){a.vLoading=!1,a.tLoading=!1,a.mLoading=!1,a.error=null,a.tError=null,a.mError=null,a.vError=null,a.setValidationReport(null)},a.removeDuplicates=function(){a.vLoading=!0,a.$broadcast("cb:removeDuplicates")},a.init=function(){a.clear(),a.initCodemirror(),a.$on("cb:refreshEditor",function(b){a.refreshEditor()}),a.$on("cb:clearEditor",function(b){a.clearMessage()}),h.$on("cb:reportLoaded",function(b,c){null!=a.testStep&&k.setValidationReport(a.testStep,c)}),a.$on("cb:testStepLoaded",function(b,c){if(a.clear(),a.testStep=c,null!=a.testStep.testContext){a.cb.editor=i.getEditor(a.testStep.testContext.format),a.cb.editor.instance=a.editor,a.cb.cursor=i.getCursor(a.testStep.testContext.format);var d=null;a.isTestCase()?(a.nodelay=!0,d=k.getExecutionMessage(a.testStep),d=d&&null!=d?d:""):(a.nodelay=!1,d=null==j.get(j.CB_EDITOR_CONTENT_KEY)?"":j.get(j.CB_EDITOR_CONTENT_KEY)),a.editor&&(a.editor.doc.setValue(d),a.execute())}}),a.$on("cb:removeTestStep",function(b,c){a.testStep=null}),a.$on("cb:loadEditorContent",function(b,c){a.nodelay=!0;var d=null==c?"":c;a.editor.doc.setValue(d),a.cb.message.id=null,a.cb.message.name="",a.execute()}),h.$on("cb:duplicatesRemoved",function(b,c){a.vLoading=!1})}}]),angular.module("cb").controller("CBProfileViewerCtrl",["$scope","CB",function(a,b){a.cb=b}]),angular.module("cb").controller("CBReportCtrl",["$scope","$sce","$http","CB",function(a,b,c,d){a.cb=d}]),angular.module("cb").controller("CBVocabularyCtrl",["$scope","CB",function(a,b){a.cb=b}]),angular.module("hit-tool").controller("ContactCtrl",["$scope","ContactLoader","ContactListLoader",function(a,b,c){a.init=function(){var b=new c;return b.then(function(b){a.contacts=b},function(b){a.error=b}),b}}]),angular.module("hit-tool").controller("AboutCtrl",["$scope","AppInfo",function(a,b){}]),angular.module("hit-tool-directives").directive("compile",["$compile",function(a){return function(b,c,d){b.$watch(function(a){return a.$eval(d.compile)},function(d){c.html(d),a(c.contents())(b)})}}]),angular.module("hit-tool-directives").directive("stRatio",function(){return{link:function(a,b,c){var d=+c.stRatio;b.css("width",d+"%")}}}),angular.module("hit-tool-directives").directive("csSelect",function(){return{require:"^stTable",template:"",scope:{row:"=csSelect"},link:function(a,b,c,d){b.bind("change",function(b){a.$apply(function(){d.select(a.row,"single")})}),a.$watch("row.isSelected",function(a,c){a===!0?b.parent().addClass("st-selected"):b.parent().removeClass("st-selected")})}}}),angular.module("hit-tool-directives").directive("mypopover",["$compile","$templateCache",function(a,b){return{restrict:"A",link:function(a,c,d){var e=b.get("profileInfo.html"),f={content:e,placement:"bottom",html:!0};$(c).popover(f)}}}]),angular.module("hit-tool-directives").directive("windowExit",["$window","$templateCache",function(a,b){return{restrict:"AE",compile:function(c,d){var e=a.attachEvent||a.addEventListener,f=a.attachEvent?"onbeforeunload":"beforeunload";e(f,function(a){b.removeAll()})}}}]),angular.module("hit-tool-directives").directive("initiatorConfigForm",["$compile",function(a){return function(b,c,d){b.$watch(function(a){return a.$eval(d.htmlForm)},function(d){c.html(d),a(c.contents())(b)})}}]);