<div ng-show="loading" style="text-align:center">
    <i class="fa fa-circle-o-notch fa-spin fa-2x"></i>
</div>
<div ng-show="!loading">
<div ng-show="error !== null">
    <div class="alert alert-danger" role="alert" ng-bind="error"></div>
</div>
<div ng-show="error === null">
<div ng-show="valueSetDefinitionGroups != null && valueSetDefinitionGroups.length > 0">
<div class="row">
<div class="col-md-4">
    <div class="panel panel-info">
        <!-- Default panel contents -->
        <div class="panel-heading"><i class="glyphicon glyphicon-list"></i> ValueSet Collections
        </div>
        <div class="panel-body">
            <div ng-show="error == null">
                <tabset>
                    <tab ng-repeat="valueSetDefinitionGroup in valueSetDefinitionGroups | orderBy : 'position'"
                         heading="{{valueSetDefinitionGroup.grouping}}">
                        <div class="panel panel-info">
                            <div class="panel-body">
                                <div ng-controller="VocabGroupCtrl"
                                     ng-init="init(valueSetDefinitionGroup)">
                                    <div class="iz-vocab-table">
                                        <table st-table="tmpList" st-safe-src="tableList"
                                               class="table table-striped table-bordered ng-table-text stTable table-fix-header vocab-tab-table">
                                            <thead>

                                            <tr>
                                                <th colspan="2" st-ratio="100">
                                                    <input st-search placeholder="Search" class="input-sm form-control"
                                                           type="search"/>
                                                </th>
                                            </tr>
                                            <tr class="tbl-header" style="margin-right: {{scrollbarWidth}}px;">
                                                <th st-ratio="50" st-sort="bindingIdentifier">Binding Identifier</th>
                                                <th st-sort="name" st-ratio="50">Value Set Name</th>
                                            </tr>

                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="row in tmpList">
                                                <td st-ratio="50">
                                                    <a class="point" ng-show="row.bindingIdentifier"
                                                       ng-click="selectValueSetDefinition(row,tableLibrary)"
                                                       ng-bind="row.bindingIdentifier"></a>
                                                    <span ng-show="row.bindingIdentifier == null">N/A</span>
                                                </td>
                                                <td st-ratio="50">
                                                    <span ng-show="row.name" ng-bind="row.name"></span>
                                                    <span ng-show="row.name == null">N/A</span>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </tab>
                </tabset>
            </div>

            <div ng-show="error != null">
                <div class="alert alert-danger" role="alert" ng-bind="error"></div>
            </div>

        </div>
    </div>


</div>
<div class="col-md-8">
<div class="">
<div id="messagePanel" class="panel panel-info">
<!-- Default panel contents -->
<div class="panel-heading"><i class="glyphicon glyphicon-file"></i> Value Set Information</div>
<div class="panel-body vocab-search-result">

<form class="form-inline" name="searchValueForm" ng-submit="searchTableValues()">
    <div class="">
        <input type="text" ng-model="searchString" class="input-sm" />
        <select ng-model="selectionCriteria" required ng-change="clearSearchResults()" class="input-sm">
            <option value="TableId">Binding Identifier</option>
            <option value="Value">Value (Code)</option>
            <option value="ValueSetCode">Value Set Code</option>
            <option value="ValueSetName">Value Set Name</option>
            <option value="Description">Description</option>
        </select>
        <button type="button" class="btn btn-sm btn-primary" ng-disabled="searchString == ''"
                ng-click="searchTableValues()">
            <i class="fa fa-search"></i>
            Search
        </button>
    </div>
</form>

<br/>


<div ng-show="vocabResError != null">
    <div class="alert alert-info" role="alert"
         ng-bind="vocabResError"></div>
</div>

<div ng-show="vocabResError == null">
<div ng-show="searchResults != null && searchResults.length > 0">

    <div class="panel panel-info">
        <div class="panel-body">

            <div class="divScroll-1">
                <div class="iz-vocab-table-result"
                     ng-show="selectionCriteria === 'TableId' || selectionCriteria === 'ValueSetCode' || selectionCriteria === 'ValueSetName'">
                    <table st-table="tmpSearchResults" st-safe-src="searchResults"
                           class="table table-striped table-bordered ng-table-text stTable table-fix-header vocab-result-table">
                        <thead>
                        <tr>
                            <th colspan="2" st-ratio="100">
                                <input st-search placeholder="Search" class="input-sm form-control" type="search"/>
                            </th>
                        </tr>

                        <tr class="tbl-header" style="margin-right: {{scrollbarWidth}}px;">
                            <th st-ratio="50" st-sort="bindingIdentifier">Binding Identifier</th>
                            <th st-ratio="50" st-sort="name">ValueSet Name</th>
                            <!--<th st-ratio="20" st-sort="description">Description</th>-->
                            <!--<th st-ratio="20" st-sort="version">ValueSet Version</th>-->
                            <!--<th st-ratio="20" st-sort="oid"> Value Set OID</th>-->
                        </tr>

                        </thead>
                        <tbody>

                        <tr ng-repeat="row in tmpSearchResults">
                            <td st-ratio="50">
                                <a ng-show="row.bindingIdentifier" class="point"
                                   ng-click="selectValueSetDefinition2(row)"
                                   ng-bind="row.bindingIdentifier"></a>
                            </td>

                            <td st-ratio="50">
                                <span ng-show="row.name" ng-bind="row.name"></span>
                                <span ng-show="row.name == null">N/A</span>
                            </td>

                            <!--<td st-ratio="20">-->
                            <!--<span ng-show="row.description" ng-bind="row.description"></span>-->
                            <!--<span ng-show="row.description == null">N/A</span>-->
                            <!--</td>-->


                            <!--<td st-ratio="20">-->
                            <!--<span ng-show="row.version" ng-bind="row.version"></span>-->
                            <!--<span ng-show="row.version == null">N/A</span>-->
                            <!--</td>-->

                            <!--<td st-ratio="20">-->
                            <!--<span ng-show="row.oid" ng-bind="row.oid"></span>-->
                            <!--<span ng-show="row.oid == null">N/A</span>-->
                            <!--</td>-->
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="iz-vocab-table-result"
                     ng-show="selectionCriteria === 'Value' || selectionCriteria === 'Description'">
                    <table st-table="tmpSearchResults" st-safe-src="searchResults"
                           class="table table-striped table-bordered ng-table-text stTable table-fix-header vocab-result-table">
                        <thead>

                        <tr>
                            <th colspan="6" st-ratio="100">
                                <input st-search placeholder="Search" class="input-sm form-control" type="search"/>
                            </th>
                        </tr>

                        <tr class="tbl-header" style="margin-right: {{scrollbarWidth}}px;">
                            <th st-ratio="30" st-sort="value">Value</th>
                            <th st-ratio="30" st-sort="codeSystem">Code System</th>
                            <th st-ratio="40" st-sort="displayName">Description</th>
                            <!--<th st-ratio="50" st-sort="source">Source</th>-->
                            <!--<th st-ratio="50" st-sort="usageType">Usage</th>-->
                        </tr>

                        </thead>
                        <tbody>
                        <tr ng-repeat="row in tmpSearchResults">
                            <td st-ratio="30">
                                <span>{{row.value}}</span>
                            </td>
                            <td st-ratio="30">
                                <span ng-show="row.codeSystem">{{row.codeSystem}}</span>
                            </td>

                            <td st-ratio="40">
                                <span>{{row.displayName}}</span>
                            </td>
                            <!--<td st-ratio="50">-->
                            <!--<span>{{row.source}}</span>-->
                            <!--</td>-->

                            <!--<td st-ratio="50">-->
                            <!--<span>{{row.usageType}}</span>-->
                            <!--</td>-->
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>

<div ng-show="selectedValueSetDefinition != null">
    <div class="panel panel-info">
        <!-- Default panel contents -->
        <div class="panel-heading">Value Set Attributes</div>
        <!-- Table -->
        <table class="table table-bordered">
            <tr ng-show="selectedValueSetDefinition.bindingIdentifier != null && selectedValueSetDefinition.bindingIdentifier != ''">
                <td>Binding Identifier</td>
                <td ng-bind="selectedValueSetDefinition.bindingIdentifier"></td>
            </tr>
            <tr ng-show="selectedValueSetDefinition.name != null && selectedValueSetDefinition.name != ''">
                <td>Value Set Name</td>
                <td ng-bind="selectedValueSetDefinition.name"></td>
            </tr>

            <!--<tr>-->
            <!--<td>Value Set Description</td>-->
            <!--<td ng-bind="selectedValueSetDefinition.description"></td>-->
            <!--</tr>-->

            <!--<tr>-->
            <!--<td>Value Set Version</td>-->
            <!--<td ng-bind="selectedValueSetDefinition.version"></td>-->
            <!--</tr>-->

            <!--<tr>-->
            <!--<td>Code System</td>-->
            <!--<td ng-bind="selectedValueSetDefinition.codeSystem"></td>-->
            <!--</tr>-->

            <!--<tr ng-show="selectedValueSetDefinition.oid != '' &&  selectedValueSetDefinition.oid != null">-->
            <!--<td>Value Set OID</td>-->
            <!--<td> {{selectedValueSetDefinition.oid}}-->
            <!--</td>-->
            <!--</tr>-->
            <!--<tr ng-show="selectedValueSetDefinition.type != null && selectedValueSetDefinition.type != ''">-->
            <!--<td>Table Type</td>-->
            <!--<td ng-bind="selectedValueSetDefinition.type"></td>-->
            <!--</tr>-->
        </table>
                                    <span style="color:red; font-weight:bold;"
                                          ng-show="isNoValidation()">This table will not be validated.
                                    </span>
    </div>
    <br/>

    <div class="panel panel-info">
        <!-- Default panel contents -->
        <div class="panel-heading">Value Set Elements</div>
        <div class="divScroll-1">
            <div class="iz-vocab-table-result">
                <table st-table="tmpValueSetElements"
                       st-safe-src="selectedValueSetDefinition.valueSetElements"
                       class="table table-striped table-bordered ng-table-text stTable table-fix-header vocab-result-table">
                    <thead>
                    <tr>
                        <th colspan="5" st-ratio="100">
                            <input st-search placeholder="Search" class="input-sm form-control" type="search"/>
                        </th>
                    </tr>

                    <tr class="tbl-header" style="margin-right: {{scrollbarWidth}}px;">
                        <th st-ratio="30" st-sort="code">Code</th>
                        <th st-ratio="30" st-sort="codeSystem">Code System</th>
                        <th st-ratio="40" st-sort="displayName">Description</th>
                        <!--<th st-ratio="50" st-sort="source">Source</th>-->
                        <!--<th st-ratio="50" st-sort="usageType">Usage</th>-->
                    </tr>

                    </thead>
                    <tbody>

                    <tr ng-repeat="row in tmpValueSetElements">
                        <td st-ratio="30">
                            <span>{{row.value}}</span>
                        </td>
                        <td st-ratio="30">
                            <span>{{row.codeSystem}}</span>
                        </td>

                        <td st-ratio="40">
                            <span>{{row.displayName}}</span>
                        </td>
                        <!--<td st-ratio="50">-->
                        <!--<span>{{row.source}}</span>-->
                        <!--</td>-->

                        <!--<td st-ratio="50">-->
                        <!--<span>{{row.usageType}}</span>-->
                        <!--</td>-->
                    </tr>
                    </tbody>
                </table>

            </div>

        </div>
    </div>
</div>
</div>
</div>
</div>

</div>
</div>
</div>
</div>
<div ng-show="valueSetDefinitionGroups == null || valueSetDefinitionGroups.length === 0">
    ValueSet Library is Empty.
</div>
</div>


</div>
</div>
